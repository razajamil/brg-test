(this["webpackJsonpreckon-test"]=this["webpackJsonpreckon-test"]||[]).push([[0],{103:function(t,e,a){},104:function(t,e,a){},107:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(20),s=a.n(i),o=(a(80),a(33)),c=a(19),u=a(70),p=a(22),l=a(38),m=a(12),_=function(t){return void 0!==t&&null!==t&&Array.isArray(t)&&t.length>0},y=function(t){return null!==t&&void 0!==t&&Object.keys(t).length>0},g=function(t){return null!==t&&void 0!==t&&""!==t},d=function(t,e){return Object.keys(t).map((function(a,n){return function(t){return"[object Function]"===Object.prototype.toString.call(t)}(e)?e(t[a],n):t[a]}))},f=function(t){return"api/"+t},v=function(t){return y(t)&&t.type.startsWith("api/")},b=function(t,e){return Object(p.a)({},t,{type:"".concat(t.type,"/").concat(e.toUpperCase()),meta:Object(p.a)({},t.meta,{entityID:e,entityActionType:t.type,entityActionParams:Object(p.a)({},t.meta?t.meta.entityActionParams:{},{},t.payload)})})},k=function(t,e){var a=b(t,e);return Object(p.a)({},a,{type:f(a.type)})},h=function(t){return y(t)&&y(t.meta)&&t.meta.entityActionType},E=a(46),O=a.n(E),j="99bb380ae104af01967cd3e835c98652",A={id:"artists",initialState:{top_artists:{},get_top_artists_request:{country:"",current_page:0,results_per_page:0,max_pages:0},get_top_artists_api_status:{loading:!1,success:!1,error:""},artist_top_tracks:{},get_artist_top_tracks_api_status:{loading:!1,success:!1,error:""}},getTopArtists:{apiCall:function(t){var e=t.country,a=t.page,n=t.resultsPerPage;return O.a.get("https://ws.audioscrobbler.com/2.0/?method=geo.gettopartists&api_key=".concat(j,"&country=").concat(e,"&page=").concat(a,"&limit=").concat(n,"&format=").concat("json"))},action:function(t){var e=t.country,a=t.page,n=t.resultsPerPage;return k({payload:{country:e,page:a,resultsPerPage:n},type:"getTopArtists"},"artists")},loading:{reducer:function(t,e){var a=e.payload,n=a.country,r=a.page,i=a.resultsPerPage;t.top_artists={},t.get_top_artists_api_status={loading:!0,success:!1,error:""},t.get_top_artists_request={country:n,current_page:r,results_per_page:i,max_pages:-1}}},success:{reducer:function(t,e){var a=e.payload,n=e.meta.entityActionParams;if(y(a)&&y(a.data)&&y(a.data.topartists)&&_(a.data.topartists.artist)&&y(n)&&!isNaN(n.page)){var r=a.data.topartists["@attr"];t.top_artists=Object(m.a)(a.data.topartists.artist),t.get_top_artists_request={country:r.country,current_page:parseInt(r.page),results_per_page:parseInt(r.perPage),max_pages:parseInt(r.totalPages)}}t.get_top_artists_api_status={loading:!1,success:!0,error:""}}},error:{reducer:function(t,e){t.get_top_artists_api_status={loading:!1,success:!1,error:"api error"}}}},getArtistTopTracks:{apiCall:function(t){var e=t.artistID;return O.a.get("https://ws.audioscrobbler.com/2.0/?method=artist.gettoptracks&mbid=".concat(e,"&page=1&limit=5&api_key=").concat(j,"&format=").concat("json"))},action:function(t){var e=t.artistID,a=t.artistName;return k({payload:{artistID:e,artistName:a},type:"getArtistTopTracks"},"artists")},loading:{reducer:function(t,e){var a=e.payload;a.artistID,a.artistName;t.artist_top_tracks={},t.get_artist_top_tracks_api_status={loading:!0,success:!1,error:""}}},success:{reducer:function(t,e){var a=e.payload,n=e.meta.entityActionParams;y(a)&&y(a.data)&&y(a.data.toptracks)&&_(a.data.toptracks.track)&&y(n)&&(t.artist_top_tracks={name:a.data.toptracks.track[0].artist.name,tracks:Object(m.a)(a.data.toptracks.track)}),t.get_artist_top_tracks_api_status={loading:!1,success:!0,error:""}}},error:{reducer:function(t,e){t.artist_top_tracks={},t.get_artist_top_tracks_api_status={loading:!1,success:!1,error:"api error"}}}}},T=function(t){return{top_artists:t.artists.top_artists,get_top_artists_request:t.artists.get_top_artists_request,get_top_artists_api_status:t.artists.get_top_artists_api_status}},w=function(t){return{artist_top_tracks:t.artists.artist_top_tracks,get_artist_top_tracks_api_status:t.artists.get_artist_top_tracks_api_status}},x={};x.artists=A;var I=x,P=function(){var t={};return d(I,(function(e){t[e.id]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.initialState,a=arguments.length>1?arguments[1]:void 0;if(a.meta&&g(a.meta.entityID)&&a.meta.entityID===e.id&&g(a.meta.entityActionType)&&g(a.meta.entityActionTypeResult)&&g(a.meta.entityActionTypeResult)){var n=e[a.meta.entityActionType][a.meta.entityActionTypeResult].reducer;return Object(l.a)(t,(function(t){return n(t,a)}))}if(a.meta&&a.meta.entityID===e.id&&g(a.meta.entityActionType)&&!g(a.meta.entityActionTypeResult)){var r=t,i=e[a.meta.entityActionType].reducer;return i&&(r=Object(l.a)(t,(function(t){return i(t,a)}))),r}if(a.meta&&_(a.meta.entityActionTypeResultShare)){var s=t;return a.meta.entityActionTypeResultShare.map((function(a){if(a.entityID===e.id){var n=I[a.entityID][a.action],r=n.action,i=n.reducer;i&&(s=Object(l.a)(t,(function(t){return i(t,r(a.params))})))}})),s}return t}})),t},D=Object(c.c)(Object(p.a)({},P())),C=a(26),N=a.n(C),S=a(27),R=function(t,e){var a={},n=I[e.entityID][e.entityActionType].loading.action;return n?(a=n(t,e)).meta.entityActionTypeResult="loading":a=function(t){g(t.type)||(t.type=t.meta.entityActionType);var e=b(t,t.meta.entityID);return e.type="api_l/"+e.type,e.meta.entityActionTypeResult="loading",e}({payload:t,meta:e}),a},q=function(t,e){var a={},n=I[e.entityID][e.entityActionType].success.action;return n?(a=n(t,e)).meta.entityActionTypeResult="success":a=function(t){g(t.type)||(t.type=t.meta.entityActionType);var e=b(t,t.meta.entityID);return e.type="api_s/"+e.type,e.meta.entityActionTypeResult="success",e}({payload:t,meta:e}),[a]},B=function(t,e){var a={},n=I[e.entityID][e.entityActionType].error.action;return n?(a=n(t,e)).meta.entityActionTypeResult="error":a=function(t){g(t.type)||(t.type=t.meta.entityActionType);var e=b(t,t.meta.entityID);return e.type="api_f/"+e.type,e.meta.entityActionTypeResult="error",e}({payload:t,meta:e}),a},V=function(t,e){return function(){return I[e.entityID][e.entityActionType].apiCall(e.entityActionParams)}},F=N.a.mark(W),L=N.a.mark(z);function W(t){var e,a,n,r;return N.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!h(t)||G(t)){i.next=26;break}return i.prev=2,i.next=5,Object(S.b)(R(t.payload,t.meta));case 5:return e=V(t.payload,t.meta),i.next=8,e();case 8:if(a=i.sent,!y(a)){i.next=15;break}return n=q(a,t.meta),i.next=13,Object(S.a)(n.map((function(t){return Object(S.b)(t)})));case 13:i.next=19;break;case 15:return r=B(a,t.meta),console.log(r),i.next=19,Object(S.b)(r);case 19:i.next=25;break;case 21:i.prev=21,i.t0=i.catch(2),"color:red",console.log("%c%s","color:red",i.t0);case 25:M(t);case 26:i.next=31;break;case 28:i.prev=28,i.t1=i.catch(0),console.log("%c%s","API SAGA: unknown error");case 31:case"end":return i.stop()}}),F,null,[[0,28],[2,21]])}function z(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.c)(v,W);case 2:case"end":return t.stop()}}),L)}window.apiSagaVars={};var G=function(t){var e=t.meta,a=e.entityID;Object.keys(e.entityActionParams).map((function(t){a+=t+e.entityActionParams[t]}));var n=g(window.apiSagaVars[a]);return n||(window.apiSagaVars[a]="1"),n},M=function(t){var e=t.meta,a=e.entityID;Object.keys(e.entityActionParams).map((function(t){a+=t+e.entityActionParams[t]})),delete window.apiSagaVars[a]},J=N.a.mark(U);function U(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.a)([z()]);case 2:case"end":return t.stop()}}),J)}var X="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,H=Object(u.a)(),K=Object(c.e)(D,X(Object(c.a)(H)));window.store=K,H.run(U);var $=K,Q=(a(103),a(104),a(25)),Y=a(30),Z=a(37),tt=a(129),et=a(60),at=a(144),nt=a(108),rt=a(143),it=a(131),st=a(68),ot=a.n(st),ct=function(){var t=Object(o.b)(),e=Object(o.c)(T),a=e.top_artists,n=e.get_top_artists_request,r=e.get_top_artists_api_status,i=Object(o.c)(w),s=i.artist_top_tracks;return{top_artists:a,get_top_artists_request:n,get_top_artists:function(e){var a=e.country,n=e.page,r=e.resultsPerPage;t(A.getTopArtists.action({country:a,page:n,resultsPerPage:r}))},get_top_artists_api_status:r,get_artist_top_tracks:function(e){var a=e.artistID;g(a)&&t(A.getArtistTopTracks.action({artistID:a}))},get_artist_top_tracks_api_status:i.get_artist_top_tracks_api_status,artist_top_tracks:s}},ut=Object(tt.a)((function(t){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"},homeIcon:{cursor:"pointer"},input:{marginLeft:t.spacing(1),flex:1},iconButton:{padding:10}}}));function pt(t){return r.a.createElement(et.a,t,r.a.createElement("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}))}var lt=function(){var t=ct(),e=t.get_top_artists_request,a=t.get_top_artists_api_status,i=t.get_artist_top_tracks_api_status,s=Object(n.useState)(""),o=Object(Z.a)(s,2),c=o[0],u=o[1],p=Object(Q.f)();Object(n.useEffect)((function(){g(c)||u(e.country)}),[e.country]);var l=ut();return r.a.createElement(r.a.Fragment,null,(a.loading||i.loading)&&r.a.createElement(at.a,null),r.a.createElement(nt.a,{component:"div",className:l.root},r.a.createElement(pt,{color:"inherit",className:l.homeIcon,title:"Home",onClick:function(){p.push("/"),u("")}}),r.a.createElement(rt.a,{className:l.input,placeholder:"Find artists by country",inputProps:{"aria-label":"country"},value:c,onChange:function(t){u(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&p.push("/topartists/".concat(c,"/1"))}}),r.a.createElement(it.a,{type:"submit",className:l.iconButton,"aria-label":"search",onClick:function(){p.push("/topartists/".concat(c,"/1"))}},r.a.createElement(ot.a,null))))},mt=a(137),_t=a(23),yt=a(138),gt=a(142),dt=a(136),ft=(a(4),a(132)),vt=a(133),bt=a(134),kt=a(135),ht=a(39),Et=Object(tt.a)((function(t){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%",cursor:"pointer"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:ht.a[500]}}})),Ot=function(t){var e=t.artist,a=Object(Q.f)(),n=Et();return r.a.createElement(ft.a,{className:n.root},r.a.createElement(vt.a,{title:e.name,subheader:"".concat(e.listeners," listeners")}),r.a.createElement(bt.a,{className:n.media,image:e.image[3]["#text"],title:"View tracks",onClick:function(){y(e)&&g(e.mbid)&&a.push("/artist/".concat(e.mbid))}}),r.a.createElement(kt.a,null,r.a.createElement(_t.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement(dt.a,{target:"_blank",href:e.url},"View on Last.fm"))))},jt=Object(tt.a)((function(t){return{root:{flexGrow:1},inline:{display:"inline"},paginationContainer:{marginTop:40,marginBottom:40,"& ul.MuiPagination-ul":{justifyContent:"center"}},avatar:{cursor:"pointer"}}})),At=function(){var t=ct(),e=t.top_artists,a=t.get_top_artists,i=t.get_top_artists_request,s=t.get_top_artists_api_status,o=Object(Q.g)(),c=o.country,u=o.page,p=Object(Q.f)();Object(n.useEffect)((function(){var t=parseInt(u);g(c)&&t>0&&a({country:c,page:t,resultsPerPage:5})}),[c,u]);var l=jt();return r.a.createElement("div",{style:{marginTop:"20px"}},_(e)&&!s.loading&&r.a.createElement(mt.a,{container:!0,spacing:2,justify:"center",className:l.root},e.slice(0,5).map((function(t){return r.a.createElement(mt.a,{item:!0,lg:3,md:4,sm:6,xs:12},r.a.createElement(Ot,{artist:t}))}))),_(e)&&!s.loading&&r.a.createElement(gt.a,{className:l.paginationContainer,variant:"outlined",shape:"rounded",count:parseInt(i.max_pages),page:parseInt(u),boundaryCount:3,onChange:function(t,e){g(c)&&e>0&&p.push("/topartists/".concat(c,"/").concat(e))}}),!_(e)&&s.success&&r.a.createElement(r.a.Fragment,null,r.a.createElement(_t.a,null,"No results found, please try again"),p.length>2&&r.a.createElement(yt.a,{variant:"outlined",size:"small",style:{marginTop:10},onClick:function(){p.goBack()}},"Back")))},Tt=a(139),wt=a(145),xt=a(140),It=a(141),Pt=a(69),Dt=a.n(Pt),Ct=Object(tt.a)((function(t){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:t.palette.background.paper},title:{margin:t.spacing(4,0,2)},paginationContainer:{marginTop:20}}})),Nt=function(){var t=ct(),e=t.artist_top_tracks,a=t.get_artist_top_tracks,i=Object(Q.g)().artistID,s=Object(Q.f)();Object(n.useEffect)((function(){a({artistID:i})}),[i]);var o=Ct();return r.a.createElement("div",null,y(e)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.a,{item:!0,xs:12},r.a.createElement(_t.a,{variant:"h6",className:o.title},r.a.createElement(yt.a,{variant:"outlined",size:"small",style:{float:"left"},onClick:function(){s.goBack()}},"Back"),e.name),r.a.createElement("div",{className:o.demo},r.a.createElement(Tt.a,null,e.tracks.map((function(t){return r.a.createElement(wt.a,{key:t.mbid},r.a.createElement(xt.a,null,r.a.createElement(Dt.a,null)),r.a.createElement(It.a,{primary:t.name,secondary:"".concat(t.listeners," listeners")}))})))))))},St=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(lt,null),r.a.createElement(Q.c,null,r.a.createElement(Q.a,{exact:!0,path:"/artist/:artistID"},r.a.createElement(Nt,null)),r.a.createElement(Q.a,{exact:!0,path:"/topartists/:country/:page"},r.a.createElement(At,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement((function(){return r.a.createElement(o.a,{store:$},r.a.createElement(Y.a,null,r.a.createElement(St,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},75:function(t,e,a){t.exports=a(107)},80:function(t,e,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.80c87e9a.chunk.js.map