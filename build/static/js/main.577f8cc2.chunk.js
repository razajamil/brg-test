(this["webpackJsonpreckon-test"]=this["webpackJsonpreckon-test"]||[]).push([[0],{106:function(t,e,a){},107:function(t,e,a){},110:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(21),c=a.n(i),s=(a(84),a(31)),o=a(20),u=a(72),p=a(23),l=a(36),m=a(12),y=function(t){return void 0!==t&&null!==t&&Array.isArray(t)&&t.length>0},_=function(t){return null!==t&&void 0!==t&&Object.keys(t).length>0},g=function(t){return null!==t&&void 0!==t&&""!==t},d=function(t){return"[object Function]"===Object.prototype.toString.call(t)},f=function(t){return"api/"+t},b=function(t){return _(t)&&t.type.startsWith("api/")},v=function(t,e){return Object(p.a)({},t,{type:"".concat(t.type,"/").concat(e.toUpperCase()),meta:Object(p.a)({},t.meta,{entityID:e,entityActionType:t.type,entityActionParams:Object(p.a)({},t.meta?t.meta.entityActionParams:{},{},t.payload)})})},k=function(t,e){var a=v(t,e);return Object(p.a)({},a,{type:f(a.type)})},O=function(t){return _(t)&&_(t.meta)&&t.meta.entityActionType},A=a(43),E=a.n(A),j="99bb380ae104af01967cd3e835c98652",h={id:"artists",initialState:{top_artists:{},get_top_artists_request:{country:"",current_page:0,results_per_page:0,max_pages:0},get_top_artists_api_status:{loading:!1,success:!1,error:""},artist_top_tracks:{},get_artist_top_tracks_api_status:{loading:!1,success:!1,error:""}},getTopArtists:{apiCall:function(t){var e=t.country,a=t.page,n=t.resultsPerPage;return E.a.get("http://ws.audioscrobbler.com/2.0/?method=geo.gettopartists&api_key=".concat(j,"&country=").concat(e,"&page=").concat(a,"&limit=").concat(n,"&format=").concat("json"))},action:function(t){var e=t.country,a=t.page,n=t.resultsPerPage;return k({payload:{country:e,page:a,resultsPerPage:n},type:"getTopArtists"},"artists")},loading:{reducer:function(t,e){var a=e.payload,n=a.country,r=a.page,i=a.resultsPerPage;t.get_top_artists_api_status={loading:!0,success:!1,error:""},t.get_top_artists_request={country:n,current_page:r,results_per_page:i,max_pages:-1}}},success:{reducer:function(t,e){var a=e.payload,n=e.meta.entityActionParams;if(_(a)&&_(a.data)&&_(a.data.topartists)&&y(a.data.topartists.artist)&&_(n)&&!isNaN(n.page)){var r=a.data.topartists["@attr"];t.top_artists=Object(m.a)(a.data.topartists.artist),t.get_top_artists_request={country:r.country,current_page:parseInt(r.page),results_per_page:parseInt(r.perPage),max_pages:parseInt(r.totalPages)}}t.get_top_artists_api_status={loading:!1,success:!0,error:""}}},error:{reducer:function(t,e){t.get_top_artists_api_status={loading:!1,success:!1,error:"api error"}}}},getArtistTopTracks:{apiCall:function(t){var e=t.artistID;return E.a.get("http://ws.audioscrobbler.com/2.0/?method=artist.gettoptracks&mbid=".concat(e,"&page=1&limit=5&api_key=").concat(j,"&format=").concat("json"))},action:function(t){var e=t.artistID,a=t.artistName;return k({payload:{artistID:e,artistName:a},type:"getArtistTopTracks"},"artists")},loading:{reducer:function(t,e){t.artist_top_tracks={},t.get_artist_top_tracks_api_status={loading:!0,success:!1,error:""}}},success:{reducer:function(t,e){var a=e.payload,n=e.meta.entityActionParams;_(a)&&_(a.data)&&_(a.data.toptracks)&&y(a.data.toptracks.track)&&_(n)&&(t.artist_top_tracks={name:a.data.toptracks.track[0].artist.name,tracks:Object(m.a)(a.data.toptracks.track)}),t.get_artist_top_tracks_api_status={loading:!1,success:!0,error:""}}},error:{reducer:function(t,e){t.artist_top_tracks={},t.get_artist_top_tracks_api_status={loading:!1,success:!1,error:"api error"}}}}},T=function(t){return{top_artists:t.artists.top_artists,get_top_artists_request:t.artists.get_top_artists_request,get_top_artists_api_status:t.artists.get_top_artists_api_status}},w=function(t){return{artist_top_tracks:t.artists.artist_top_tracks}},I={};I.artists=h;var x=I,P=function(){var t,e,a={};return t=x,e=function(t){a[t.id]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState,a=arguments.length>1?arguments[1]:void 0;if(a.meta&&g(a.meta.entityID)&&a.meta.entityID===t.id&&g(a.meta.entityActionType)&&g(a.meta.entityActionTypeResult)&&g(a.meta.entityActionTypeResult)){var n=t[a.meta.entityActionType][a.meta.entityActionTypeResult].reducer;return Object(l.a)(e,(function(t){return n(t,a)}))}if(a.meta&&a.meta.entityID===t.id&&g(a.meta.entityActionType)&&!g(a.meta.entityActionTypeResult)){var r=e,i=t[a.meta.entityActionType].reducer;return i&&(r=Object(l.a)(e,(function(t){return i(t,a)}))),r}if(a.meta&&y(a.meta.entityActionTypeResultShare)){var c=e;return a.meta.entityActionTypeResultShare.map((function(a){if(a.entityID===t.id){var n=x[a.entityID][a.action],r=n.action,i=n.reducer;i&&(c=Object(l.a)(e,(function(t){return i(t,r(a.params))})))}})),c}return e}},Object.keys(t).map((function(a,n){return d(e)?e(t[a],n):t[a]})),a},D=Object(o.c)(Object(p.a)({},P())),N=a(26),C=a.n(N),S=a(27),R=function(t,e){var a={},n=x[e.entityID][e.entityActionType].loading.action;return n?(a=n(t,e)).meta.entityActionTypeResult="loading":a=function(t){g(t.type)||(t.type=t.meta.entityActionType);var e=v(t,t.meta.entityID);return e.type="api_l/"+e.type,e.meta.entityActionTypeResult="loading",e}({payload:t,meta:e}),a},q=function(t,e){var a={},n=x[e.entityID][e.entityActionType].success.action;return n?(a=n(t,e)).meta.entityActionTypeResult="success":a=function(t){g(t.type)||(t.type=t.meta.entityActionType);var e=v(t,t.meta.entityID);return e.type="api_s/"+e.type,e.meta.entityActionTypeResult="success",e}({payload:t,meta:e}),[a]},B=function(t,e){var a={},n=x[e.entityID][e.entityActionType].error.action;return n?(a=n(t,e)).meta.entityActionTypeResult="error":a=function(t){g(t.type)||(t.type=t.meta.entityActionType);var e=v(t,t.meta.entityID);return e.type="api_f/"+e.type,e.meta.entityActionTypeResult="error",e}({payload:t,meta:e}),a},V=function(t,e){return function(){return x[e.entityID][e.entityActionType].apiCall(e.entityActionParams)}},W=C.a.mark(z),F=C.a.mark(G);function z(t){var e,a,n,r;return C.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!O(t)||J(t)){i.next=26;break}return i.prev=2,i.next=5,Object(S.b)(R(t.payload,t.meta));case 5:return e=V(t.payload,t.meta),i.next=8,e();case 8:if(a=i.sent,!_(a)){i.next=15;break}return n=q(a,t.meta),i.next=13,Object(S.a)(n.map((function(t){return Object(S.b)(t)})));case 13:i.next=19;break;case 15:return r=B(a,t.meta),console.log(r),i.next=19,Object(S.b)(r);case 19:i.next=25;break;case 21:i.prev=21,i.t0=i.catch(2),"color:red",console.log("%c%s","color:red",i.t0);case 25:L(t);case 26:i.next=31;break;case 28:i.prev=28,i.t1=i.catch(0),console.log("%c%s","API SAGA: unknown error");case 31:case"end":return i.stop()}}),W,null,[[0,28],[2,21]])}function G(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.c)(b,z);case 2:case"end":return t.stop()}}),F)}window.apiSagaVars={};var J=function(t){var e=t.meta,a=e.entityID;Object.keys(e.entityActionParams).map((function(t){a+=t+e.entityActionParams[t]}));var n=g(window.apiSagaVars[a]);return n||(window.apiSagaVars[a]="1"),n},L=function(t){var e=t.meta,a=e.entityID;Object.keys(e.entityActionParams).map((function(t){a+=t+e.entityActionParams[t]})),delete window.apiSagaVars[a]},U=C.a.mark(X);function X(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.a)([G()]);case 2:case"end":return t.stop()}}),U)}var K="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,M=Object(u.a)(),$=Object(o.e)(D,K(Object(o.a)(M)));window.store=$,M.run(X);var H=$,Q=(a(106),a(107),a(25)),Y=a(32),Z=a(35),tt=a(132),et=a(134),at=a(144),nt=a(135),rt=a(65),it=a.n(rt),ct=function(){var t=Object(s.b)(),e=Object(s.c)(T);return{top_artists:e.top_artists,get_top_artists_request:e.get_top_artists_request,get_top_artists:function(e){var a=e.country,n=e.page,r=e.resultsPerPage;t(h.getTopArtists.action({country:a,page:n,resultsPerPage:r}))},get_top_artists_api_status:e.get_top_artists_api_status,get_artist_top_tracks:function(e){var a=e.artistID;g(a)&&t(h.getArtistTopTracks.action({artistID:a}))},artist_top_tracks:Object(s.c)(w).artist_top_tracks}},st=Object(tt.a)((function(t){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"},input:{marginLeft:t.spacing(1),flex:1},iconButton:{padding:10}}})),ot=function(){var t=ct().get_top_artists_request,e=Object(n.useState)(""),a=Object(Z.a)(e,2),i=a[0],c=a[1],s=Object(Q.f)();Object(n.useEffect)((function(){g(i)||c(t.country)}),[t.country]);var o=st();return r.a.createElement("div",null,r.a.createElement(et.a,{component:"div",className:o.root},r.a.createElement(at.a,{className:o.input,placeholder:"Find artists by country",inputProps:{"aria-label":"country"},value:i,onChange:function(t){c(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&s.push("/topartists/".concat(i,"/1"))}}),r.a.createElement(nt.a,{type:"submit",className:o.iconButton,"aria-label":"search",onClick:function(){s.push("/topartists/".concat(i,"/1"))}},r.a.createElement(it.a,null))))},ut=a(37),pt=a(136),lt=a(146),mt=a(139),yt=a(138),_t=a(137),gt=a(145),dt=a(143),ft=Object(tt.a)((function(t){return{root:{width:"100%",maxWidth:360,backgroundColor:t.palette.background.paper},inline:{display:"inline"},paginationContainer:{marginTop:40},avatar:{cursor:"pointer"}}})),bt=function(){var t=ct(),e=t.top_artists,a=t.get_top_artists,i=t.get_top_artists_request,c=t.get_top_artists_api_status,s=Object(Q.g)(),o=s.country,u=s.page,p=Object(Q.f)();Object(n.useEffect)((function(){var t=parseInt(u);g(o)&&t>0&&a({country:o,page:t,resultsPerPage:5})}),[o,u]);var l=ft();return r.a.createElement("div",{style:{marginTop:"20px"}},y(e)&&!c.loading&&r.a.createElement(pt.a,{className:l.root},e.map((function(t){return r.a.createElement(r.a.Fragment,{key:t.name+t.mbid},r.a.createElement(lt.a,{alignItems:"flex-start"},r.a.createElement(_t.a,{onClick:function(){return function(t){_(t)&&g(t.mbid)&&p.push("/artist/".concat(t.mbid))}(t)}},r.a.createElement(gt.a,{className:l.avatar,alt:"Remy Sharp",src:t.image[2]["#text"]})),r.a.createElement(yt.a,{primary:t.name,secondary:"".concat(t.listeners," listeners")})),r.a.createElement(mt.a,{variant:"inset",component:"li"}))}))),y(e)&&!c.loading&&r.a.createElement(dt.a,{className:l.paginationContainer,variant:"outlined",shape:"rounded",count:parseInt(i.max_pages),page:parseInt(u),boundaryCount:3,onChange:function(t,e){g(o)&&e>0&&p.push("/topartists/".concat(o,"/").concat(e))}}),!y(e)&&c.success&&r.a.createElement(ut.a,null,"No results found, please try again"))},vt=a(66);function kt(){var t=Object(vt.a)(["\n  font-size: 1.5em;\n  text-align: center;\n  color: red;\n"]);return kt=function(){return t},t}a(67).a.h1(kt());var Ot=a(140),At=a(141),Et=a(142),jt=a(71),ht=a.n(jt),Tt=Object(tt.a)((function(t){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:t.palette.background.paper},title:{margin:t.spacing(4,0,2)}}})),wt=function(){var t=ct(),e=t.artist_top_tracks,a=t.get_artist_top_tracks,i=Object(Q.g)().artistID,c=Object(Q.f)();Object(n.useEffect)((function(){a({artistID:i})}),[i]);var s=Tt();return r.a.createElement("div",null,_(e)&&r.a.createElement(Ot.a,{item:!0,xs:12,md:6},r.a.createElement(ut.a,{variant:"h6",className:s.title},r.a.createElement(At.a,{variant:"outlined",size:"small",style:{float:"left"},onClick:function(){c.goBack()}},"Back"),e.name),r.a.createElement("div",{className:s.demo},r.a.createElement(pt.a,null,e.tracks.map((function(t){return r.a.createElement(lt.a,null,r.a.createElement(Et.a,null,r.a.createElement(ht.a,null)),r.a.createElement(yt.a,{primary:t.name,secondary:"".concat(t.listeners," listeners")}))}))))))},It=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ot,null),r.a.createElement(Q.c,null,r.a.createElement(Q.a,{exact:!0,path:"/artist/:artistID"},r.a.createElement(wt,null)),r.a.createElement(Q.a,{exact:!0,path:"/topartists/:country/:page"},r.a.createElement(bt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(){return r.a.createElement(s.a,{store:H},r.a.createElement(Y.a,null,r.a.createElement(It,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},79:function(t,e,a){t.exports=a(110)},84:function(t,e,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.577f8cc2.chunk.js.map